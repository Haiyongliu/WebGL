<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Basic Scene</title>
        <style>
            body { margin:0; }
            canvas { width:100%; height:100% }
        </style>
    </head>

    <body>


    </body>

    <script src="./js/three.js"></script>
    <script>
        /** 
         * 这个脚本展示最基本的WebGL的呈现过程
         * 
         * [场景，相机，模型] --> 渲染
        */
        var scene;
        var camera;
        var renderer;
        var model;

        var animateEnable = false;
        // prepare the enviroment
        initEnv();
        // prepare the model
        model = createModel();
        // attach to the html elements
        attachToCanvas();
        // put model to scene
        addToScene();
        // render the scene
        renderScene();

        // Animation and rotation and so on.
        others();

        function others(){
            registEventListener();
            animate();
        }

        function registEventListener(){
            document.body.addEventListener("click",function(){
                animateEnable = !animateEnable;
                animate();
            });
        }

        function animate(){
            if(animateEnable){
                // System timer
                window.requestAnimationFrame(animate);
            }
            renderScene();

            // step
            model.rotation.x += 0.01;
            model.rotation.y += 0.01;
            model.rotation.z += 0.01;
        }

        function renderScene(){
            renderer.render(scene,camera);
        }

        function addToScene(){
            scene.add(model);
        }

        function attachToCanvas(){
            document.body.appendChild(renderer.domElement);
        }

        function createModel(){
            // Shape
            var boxGeometry = new THREE.BoxGeometry(5,5,5);
            // Material
            var material = new THREE.LineBasicMaterial({color:0x123778,linewidth:2});

            // Mesh refer to the shape and material
            return new THREE.Mesh(boxGeometry,material);
        }

        function initEnv(){
            // 1. prepare scene
            scene = new THREE.Scene();
            // 2. prepare camera
            camera = new THREE.PerspectiveCamera(75 ,window.innerWidth/window.innerHeight,0.1,1000);
            camera.position.z = 15;
            // 3. prepare renderer
            renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth,window.innerHeight);
        }
    </script>
</html>